# vim:ft=sh

PS1='\[\e[1;32m\][\u@\h \W]\$\[\e[0m\] '
EDITOR=/usr/bin/vim

alias ls='ls -F --color=always'
alias list='ls -FhAls --color=always | less -r'
alias cp='cp -i'
alias mv='mv -i'
alias cal='cal -3'
alias grep='grep --color=always --binary-files=without-match -n'
alias less='less -r'
alias p2l='mypdflatex'
alias flv2mp3='youtube-dl -t -x --audio-format mp3 --audio-quality 128k'
alias vim='vim -O'
alias screen='screen -rd || screen'

function mypdflatex
{
    pdflatex $1
    pdflatex $1
    evince ${1%tex}pdf
}

# Sources all completion files.
COMPLETION_PWD=~/.completion/
for file in `ls $COMPLETION_PWD`
do
	source $COMPLETION_PWD/$file
done

# Function for creating vimprj projects that works with indexer.tar.gz Vim
# plugin.
function vimprj_init
{
	if [ -z "$1" ] || [ ! -d "$1" ]; then
	    echo "fatal: $0 needs a directory path..."
	    echo "usage: $0 <path> [project_name]"
	    return 1
	fi

	PROJECT_PATH=$1
	PROJECT_NAME=$2

	VIMPRJ_PATH=$PROJECT_PATH/.vimprj

	if [ -z "$PROJECT_NAME" ]; then
	    PROJECT_NAME="project"
	fi

	# Create .vimprj directory
	mkdir -p $VIMPRJ_PATH

	# Generate .vimprj/my.vim
	cat <<EOF > $VIMPRJ_PATH/my.vim
if expand('%:t') != "COMMIT_EDITMSG" && expand('%:t') != "git-rebase-todo"
  " specify our ".vimprj/.indexer_files"
  let g:indexer_indexerListFilename = '.vimprj/.indexer_files'
  set tags+=.vimprj/.indexer_files_tags/$PROJECT_NAME
endif
EOF

	# Generate .vimprj/.indexer_files
	cat <<EOF > $VIMPRJ_PATH/.indexer_files
[$PROJECT_NAME]
\$INDEXER_PROJECT_ROOT
EOF
}

[user]
    name = Jo√£o Sampaio
    email = jpmelos@gmail.com

[core]
    pager = delta
    excludesFile = ~/.gitignore-global

[interactive]
    diffFilter = delta --color-only

[delta]
    navigate = true
    side-by-side = true
    line-numbers = true

[init]
    defaultBranch = main

[log]
    date = local

[status]
    showUntrackedFiles = all

[diff]
    colorMoved = default

[merge]
    conflictStyle = diff3

[rebase]
    updateRefs = true

[rerere]
	enabled = true

[commit]
    verbose = true
    gpgSign = true

[tag]
    gpgSign = true

[push]
    default = simple
    autoSetupRemote = true

[color "branch"]
    current = green dim bold
    remote = red dim

[color "status"]
    added = green dim
    changed = blue dim
    untracked = red dim

[color "diff"]
    meta = black bold
    frag = black
    new = green dim bold
    old = red dim bold
    whitespace = black red dim bold

[alias]
    main-branch = ! git symbolic-ref refs/remotes/origin/HEAD | cut -d'/' -f4
    root = rev-parse --show-toplevel
    nuke = "! f() { source "$HOME/.gitfunctions"; __git_nuke; }; f"
    big-revert = "! f() { source "$HOME/.gitfunctions"; __git_big_revert; }; f"

    b = branch -vv --sort=-committerdate
    bn = checkout -b  # n = new
    bd = branch -D  # d = delete

    # o = checkout
    o = checkout
    om = ! git checkout $(git main-branch)  # m = master or main
    of = checkout -f

    # cp = cherry-pick, intruding into c (commit) namespace
    cp = cherry-pick

    st = status

    d = diff
    dst = diff --name-status
    dca = diff --cached

    a = add
    aa = add -A :/
    apa = add --patch

    c = commit
    ca = commit -a
    cm = commit --amend
    cn = commit -n
    cam = commit -a --amend
    can = commit -a -n
    cmn = commit --amend -n
    camn = commit -a --amend -n

    sh = show
    shf = show --name-status
    shh = "! f() { HEADN=$1; shift; git show "HEAD~$HEADN" $@; }; f"

    p = push
    pf = push --force-with-lease

    l = "! f() { git log --color=always --oneline --graph --decorate $@ | awk -f ~/.git-log-prepend-number-awk | less -R; }; f"

[include]
    path = ~/devel/dotfiles/references/gitconfigs/gpg-keys

[includeIf "gitdir:~/devel/close/"]
    path = ~/devel/dotfiles/references/gitconfigs/close
